---
layout: null
sitemap: false
permalink: /ffb/savings-rate.html
---

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.2' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/instagram-feed/css/sb-instagram.min.css?ver=1.9.1' type='text/css' media='all' />
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/ultimate-social-media-icons/css/sfsi-style.css?ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/utility.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/animate.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/bootstrap.min.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/unyson-framework.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/style.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/ie8fix.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic' type='text/css' media='all' />
{% include ff-book-css.html %}
<div class="financial-freedom-calculator two-column" id="savings-rate-calculator">
  <h3 class="calculator-title">Savings Rate Calculator</h3>
  <div class="calculator-column">
    <div class="calculator-input-group" id="annual-savings">
      <h4 class="calculator-group-title">Annual Savings</h4>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Savings 1" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="5000" min="0" />
      </div>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Savings 2" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="2000" min="0" />
      </div>
      <div class="calculator-button">
        <button>+ Add</button>
      </div>
    </div>
    <div class="calculator-input-group" id="pre-tax-investments">
      <h4 class="calculator-group-title">Pre-Tax Investments</h4>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="401(k)" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="18500" min="0" />
      </div>
      <div class="calculator-button">
        <button>+ Add</button>
      </div>
    </div>
    <div class="calculator-input-group" id="after-tax-investments">
      <h4 class="calculator-group-title">After-Tax Investments</h4>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Roth IRA" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="5500" min="0" />
      </div>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Brokerage" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="9000" min="0" />
      </div>
      <div class="calculator-button">
        <button>+ Add</button>
      </div>
    </div>
  </div>
  <div class="calculator-column">
    <div class="calculator-input-group" id="income">
      <h4 class="calculator-group-title">Annual Income</h4>
      <div class="calculator-input">
        <span class="input-prefix">$</span>
        <input type="number" class="currency" name="annual-income" id="annual-income" value="100000" min="0" />
      </div>
    </div>
    <div class="calculator-result" id="savings-rate-result"></div>

    <div class="calculator-input-group" id="years-to-fi">
      <h4 class="calculator-group-title">Years to Financial Independence</h4>
      <div class="calculator-input">
        <label for="years-to-fi-walk-away-number" id="years-to-fi-walk-away-number-label">Walk Away Number</label><br />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" name="years-to-fi-walk-away-number" id="years-to-fi-walk-away-number" value="1250000" min="0" />
      </div>
      <div class="calculator-input">
        <label for="years-to-fi-expected-investment-annual-return" id="years-to-fi-expected-investment-annual-return-label">7.0% expected investment annual return</label><br />
        <input type="range" class="slider slider--percent" name="years-to-fi-expected-investment-annual-return" id="years-to-fi-expected-investment-annual-return" value="0.07" min="0.01" max="0.15" step="0.005" />
      </div>
    </div>
    <div class="calculator-result" id="years-to-fi-result"></div>
  </div>
</div>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    console.log("Calculator js running");
    function tag(type, value = undefined, klass = undefined, id = undefined) {
      let el = document.createElement(type);
      if (klass) {
        el.setAttribute('class', klass);
      }
      if (id) {
        el.setAttribute('id', id);
      }
      if (value) {
        el.innerText = value;
      }
      return el;
    }
    function toCurrency(value, digits = 2) {
      if (value == 0) {
        return '-';
      } else {
        return '$' + value.toLocaleString(undefined, { minimumFractionDigits: digits, maximumFractionDigits: digits})
      }
    }
    function baseLog(x, y) {
      return Math.log(x) / Math.log(y);
    }
    function yearsToWalkAway(target, current, growthRate, income, savingsRate) {
      /*
        YEARS TO WALK AWAY CALCULATION

        Let:
          W = walk-away target
          C = current savings
          r = investment annual growth rate
          s = savings rate
          I = annual income
          n = years to walk-away

          W = s * I * ((1 + r)^n -1)/r + C * (1 + r)^n
          solve for n to get:
          n = Log base 1 + r of (r * W + s * I) / (r * C + s * I)
      */

      const base = 1 + growthRate;

      const numerator = growthRate * target + savingsRate * income;
      const denomenator = growthRate * current + savingsRate * income;

      return baseLog(numerator / denomenator, base);
    }
    console.log("Calculator helper functions loaded");
    const calculator = document.querySelector('#savings-rate-calculator');

    if (calculator) {
      console.log("Calculator found");
      const inputs = calculator.querySelectorAll('input');
      const selects = calculator.querySelectorAll('select');
      const currencyInputs = calculator.querySelectorAll('input.currency');

      const walkAwayNumberInput = calculator.querySelector('input#years-to-fi-walk-away-number');
      const walkAwayNumberLabel = calculator.querySelector('#years-to-fi-walk-away-number-label');
      const expectedInvestmentAnnualReturnInput = calculator.querySelector('input#years-to-fi-expected-investment-annual-return');
      const expectedInvestmentAnnualReturnLabel = calculator.querySelector('#years-to-fi-expected-investment-annual-return-label');

      const savingsRateResultDiv = calculator.querySelector('#savings-rate-calculator #savings-rate-result');
      const yearsToFiResultDiv = calculator.querySelector('#savings-rate-calculator #years-to-fi-result');

      function updateResults() {
        const walkAwayNumber = parseFloat(walkAwayNumberInput.value) || 0;
        const expectedInvestmentAnnualReturn = parseFloat(expectedInvestmentAnnualReturnInput.value) || 0;
        expectedInvestmentAnnualReturnLabel.innerHTML = (expectedInvestmentAnnualReturn * 100).toFixed(1) + '% expected investment annual return' ;

        if (savingsRateResultDiv) {
          const income = calculator.querySelector('#annual-income').value || 0;
          if (income <= 0) {
            savingsRateResultDiv.innerHTML = '';
            savingsRateResultDiv.appendChild(tag('span', 'Set income to a value greater than zero', 'result-error'));
            return;
          }
          if (walkAwayNumber < 0) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set walk away number greater than 0', 'result-error'));
            return;
          }
          if (expectedInvestmentAnnualReturn < 0.01) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set expected investment annual return greater than 1.0%', 'result-error'));
            return;
          }
          if (expectedInvestmentAnnualReturn > 0.15) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set expected investment annual return less than 15.0%', 'result-error'));
            return;
          }

          function updateSubtotal(inputGroupID) {
            const inputGroup = calculator.querySelector('#' + inputGroupID);
            const groupInputs = inputGroup.querySelectorAll('.calculator-input input.currency');
            let groupTotal = 0.0
            groupInputs.forEach( (input) => {
              let amount = parseFloat(input.value) || 0;
              groupTotal += amount
            });

            groupValue = inputGroup.querySelector('.result-value');
            if (groupValue) {
              groupValue.innerHTML = toCurrency(groupTotal, 0)
            }
            return groupTotal;
          }

          const annualSavings = updateSubtotal('annual-savings');
          const preTaxInvestments = updateSubtotal('pre-tax-investments');
          const afterTaxInvestments = updateSubtotal('after-tax-investments');

          let savingsRate = (annualSavings + preTaxInvestments + afterTaxInvestments) / income;

          function savingsRateResultText(rate) {
            let outputText = document.createDocumentFragment();

            let baseText = tag('p', null, 'calculator-highlighted-result');
            baseText.appendChild(document.createTextNode("Your Savings Rate: "));
            baseText.appendChild(tag('span', (rate * 100).toFixed(0) + '%', 'result-value'));
            outputText.appendChild(baseText);

            return outputText;
          }

          savingsRateResultDiv.innerHTML = '';
          yearsToFiResultDiv.innerHTML = '';

          let outputHeading = document.createElement('h4');
          outputHeading.innerText = 'Results';
          savingsRateResultDiv.appendChild(outputHeading);
          savingsRateResultDiv.appendChild(savingsRateResultText(savingsRate));

          function yearsToFiResultText(years) {
            let baseText = tag('p', null, 'calculator-highlighted-result');
            baseText.appendChild(document.createTextNode("Time to Financial Independence: "));
            baseText.appendChild(tag('br'));
            baseText.appendChild(tag('span', years.toFixed(2) + ' years', 'result-value'));
            return baseText;
          }

          years = yearsToWalkAway(walkAwayNumber, 0, expectedInvestmentAnnualReturn, income, savingsRate);

          yearsToFiResultDiv.appendChild(yearsToFiResultText(years));
        }
      }

      const addButtons = calculator.querySelectorAll('.calculator-button button');
      addButtons.forEach( (button) => {
        button.addEventListener('click', (e) => {
          const buttonHit = e.target;
          const buttonContainer = buttonHit.parentNode;
          const group = buttonContainer.parentNode;

          let calcInput = tag('div', null, 'calculator-input');
          let labelInput = tag('input', null, 'currency-label');
          labelInput.type = 'text';
          let prefix = tag('span', '$', 'input-prefix');
          let currencyInput = tag('input', null, 'currency');
          currencyInput.type = 'number';

          currencyInput.addEventListener('input', () => { updateResults(); });

          calcInput.appendChild(labelInput);
          calcInput.appendChild(prefix);
          calcInput.appendChild(currencyInput);
          group.insertBefore(calcInput, buttonContainer);
        })
      });

      /* Set calculator to auto-update on input changes */
      for (let i = 0; i < inputs.length; i += 1) {
        inputs[i].addEventListener('input', () => {
          updateResults();
        });
      }

      for (let i = 0; i < selects.length; i += 1) {
        selects[i].addEventListener('input', () => {
          updateResults();
        });
      }

      updateResults();
    }
  });
</script>
</body>
</html>
