---
layout: null
sitemap: false
permalink: /ffb/savings-rate.html
---

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.2' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/instagram-feed/css/sb-instagram.min.css?ver=1.9.1' type='text/css' media='all' />
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/ultimate-social-media-icons/css/sfsi-style.css?ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/utility.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/animate.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/bootstrap.min.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/unyson-framework.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/style.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/ie8fix.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic' type='text/css' media='all' />
{% include ff-book-css.html %}
<div class="financial-freedom-calculator two-column" id="savings-rate-calculator">
  <h3 class="calculator-title">Savings Rate Calculator</h3>
  <div class="calculator-column">
    <div class="calculator-input-group" id="annual-savings">
      <h4 class="calculator-group-title">Annual Savings</h4>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Savings 1" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="5000" min="0" />
      </div>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Savings 2" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="2000" min="0" />
      </div>
      <div class="calculator-button">
        <button>+ Add</button>
      </div>
    </div>
    <div class="calculator-input-group" id="pre-tax-investments">
      <h4 class="calculator-group-title">Pre-Tax Investments</h4>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="401(k)" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="18500" min="0" />
      </div>
      <div class="calculator-button">
        <button>+ Add</button>
      </div>
    </div>
    <div class="calculator-input-group" id="after-tax-investments">
      <h4 class="calculator-group-title">After-Tax Investments</h4>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Roth IRA" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="5500" min="0" />
      </div>
      <div class="calculator-input">
        <input type="text" class="currency-label" value="Brokerage" />
        <span class="input-prefix">$</span>
        <input type="number" class="currency" value="9000" min="0" />
      </div>
      <div class="calculator-button">
        <button>+ Add</button>
      </div>
    </div>
  </div>
  <div class="calculator-column">
    <div class="calculator-input-group" id="income">
      <h4 class="calculator-group-title">Annual Income</h4>
      <div class="calculator-input">
        <span class="input-prefix">$</span>
        <input type="number" class="currency" name="annual-income" id="annual-income" value="100000" min="0" />
      </div>
    </div>
    <div class="calculator-result"></div>
  </div>
</div>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    console.log("Calculator js running");
    function tag(type, value = undefined, klass = undefined, id = undefined) {
      let el = document.createElement(type);
      if (klass) {
        el.setAttribute('class', klass);
      }
      if (id) {
        el.setAttribute('id', id);
      }
      if (value) {
        el.innerText = value;
      }
      return el;
    }
    function toCurrency(value, digits = 2) {
      if (value == 0) {
        return '-';
      } else {
        return '$' + value.toLocaleString(undefined, { minimumFractionDigits: digits, maximumFractionDigits: digits})
      }
    }
    console.log("Calculator helper functions loaded");
    const calculator = document.querySelector('#savings-rate-calculator');

    if (calculator) {
      console.log("Calculator found");

      const inputs = calculator.querySelectorAll('input');
      const selects = calculator.querySelectorAll('select');
      const currencyInputs = calculator.querySelectorAll('input.currency');
      const outputDiv = calculator.querySelector('#savings-rate-calculator .calculator-result');
      function updateResults() {
        if (outputDiv) {
          const income = calculator.querySelector('#annual-income').value || 0;
          if (income <= 0) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set income to a value greater than zero', 'result-error'));
            return;
          }
          function updateSubtotal(inputGroupID) {
            const inputGroup = calculator.querySelector('#' + inputGroupID);
            const groupInputs = inputGroup.querySelectorAll('.calculator-input input.currency');
            let groupTotal = 0.0
            groupInputs.forEach( (input) => {
              let amount = parseFloat(input.value) || 0;
              groupTotal += amount
            });

            groupValue = inputGroup.querySelector('.result-value');
            if (groupValue) {
              groupValue.innerHTML = toCurrency(groupTotal, 0)
            }
            return groupTotal;
          }

          function calculateResult() {

            const annualSavings = updateSubtotal('annual-savings');
            const preTaxInvestments = updateSubtotal('pre-tax-investments');
            const afterTaxInvestments = updateSubtotal('after-tax-investments');

            let result = (annualSavings + preTaxInvestments + afterTaxInvestments) / income;

            let outputText = document.createDocumentFragment();

            let baseText = tag('p', null, 'calculator-highlighted-result');
            baseText.appendChild(document.createTextNode("Your Savings Rate: "));
            baseText.appendChild(tag('span', (result * 100).toFixed(0) + '%', 'result-value'));
            outputText.appendChild(baseText);

            return outputText;
          }

          outputDiv.innerHTML = '';
          let outputHeading = document.createElement('h4');
          outputHeading.innerText = 'Results';
          outputDiv.appendChild(outputHeading);
          outputDiv.appendChild(calculateResult());
        }
      }

      const addButtons = calculator.querySelectorAll('.calculator-button button');
      addButtons.forEach( (button) => {
        button.addEventListener('click', (e) => {
          const buttonHit = e.target;
          const buttonContainer = buttonHit.parentNode;
          const group = buttonContainer.parentNode;

          let calcInput = tag('div', null, 'calculator-input');
          let labelInput = tag('input', null, 'currency-label');
          labelInput.type = 'text';
          let prefix = tag('span', '$', 'input-prefix');
          let currencyInput = tag('input', null, 'currency');
          currencyInput.type = 'number';

          currencyInput.addEventListener('input', () => { updateResults(); });

          calcInput.appendChild(labelInput);
          calcInput.appendChild(prefix);
          calcInput.appendChild(currencyInput);
          group.insertBefore(calcInput, buttonContainer);
        })
      });

      /* Set calculator to auto-update on input changes */
      for (let i = 0; i < currencyInputs.length; i += 1) {
        currencyInputs[i].addEventListener('input', () => {
          updateResults();
        });
      }

      for (let i = 0; i < selects.length; i += 1) {
        selects[i].addEventListener('input', () => {
          updateResults();
        });
      }

      updateResults();
    }
  });
</script>
</body>
</html>
