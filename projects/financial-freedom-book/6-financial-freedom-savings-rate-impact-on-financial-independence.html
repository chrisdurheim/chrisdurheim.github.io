---
layout: null
sitemap: false
permalink: /ffb/savings-rate-impact.html
---
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.2' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/instagram-feed/css/sb-instagram.min.css?ver=1.9.1' type='text/css' media='all' />
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/plugins/ultimate-social-media-icons/css/sfsi-style.css?ver=4.9.8' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/utility.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/animate.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/bootstrap.min.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/unyson-framework.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/style.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://financialfreedombook.com/wp-content/themes/book/assets/css/ie8fix.css?ver=1.3' type='text/css' media='all' />
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,regular,italic,600,600italic,700,700italic,800,800italic' type='text/css' media='all' />
{% include ff-book-css.html %}
<div class="financial-freedom-calculator two-column" id="savings-rate-impact-on-financial-independence">
  <h3 class="calculator-title">Savings Rate Impact on Financial Independence</h3>
  <div class="calculator-column">
    <div class="calculator-input">
      <label for="annual-income" id="annual-income-label">Annual Income</label><br />
      <span class="input-prefix">$</span>
      <input type="number" class="currency" name="annual-income" id="annual-income" value="30000" min="0" />
    </div>
    <div class="calculator-input">
      <label for="walk-away-number" id="walk-away-number-label">Walk Away Number</label><br />
      <span class="input-prefix">$</span>
      <input type="number" class="currency" name="walk-away-number" id="walk-away-number" value="1250000" min="0" />
    </div>
    <div class="calculator-input">
      <label for="current-retirement-account-balance" id="current-retirement-account-balance-label">Current Retirement Account Balance</label><br />
      <span class="input-prefix">$</span>
      <input type="number" class="currency" name="current-retirement-account-balance" id="current-retirement-account-balance" value="0" min="0" />
    </div>
    <div class="calculator-input">
      <label for="expected-investment-annual-return" id="expected-investment-annual-return-label">7.0% expected investment annual return</label><br />
      <input type="range" class="slider slider--percent" name="expected-investment-annual-return" id="expected-investment-annual-return" value="0.07" min="0.01" max="0.15" step="0.005" />
    </div>
    <div class="calculator-input">
      <label for="target-savings-rate" id="target-savings-rate-label">10% target savings rate ($3,000 per year)</label><br />
      <input type="range" class="slider slider--percent" name="target-savings-rate" id="target-savings-rate" value="0.1" min="0.05" max="1.00" step="0.05" />
    </div>
  </div>
  <div class="calculator-column">
    <div class="calculator-result"></div>
  </div>
</div>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    console.log("Calculator js running");
    function tag(type, value = undefined, klass = undefined, id = undefined) {
      let el = document.createElement(type);
      if (klass) {
        el.setAttribute('class', klass);
      }
      if (id) {
        el.setAttribute('id', id);
      }
      if (value) {
        el.innerText = value;
      }
      return el;
    }
    function baseLog(x, y) {
      return Math.log(x) / Math.log(y);
    }
    function toCurrency(value, digits = 2) {
      if (value == 0) {
        return '-';
      } else {
        return '$' + value.toLocaleString(undefined, { minimumFractionDigits: digits, maximumFractionDigits: digits})
      }
    }
    console.log("Calculator helper functions loaded");
    const calculator = document.querySelector('#savings-rate-impact-on-financial-independence');

    if (calculator) {
      console.log("Calculator found");

      const inputs = document.querySelectorAll('input');
      const currencyInputs = calculator.querySelectorAll('input.currency');
      const annualIncomeInput = calculator.querySelector('input#annual-income');
      const annualIncomeLabel = calculator.querySelector('#annual-income-label');
      const walkAwayNumberInput = calculator.querySelector('input#walk-away-number');
      const walkAwayNumberLabel = calculator.querySelector('#walk-away-number-label');
      const currentRetirementAccountBalanceInput = calculator.querySelector('input#current-retirement-account-balance');
      const currentRetirementAccountBalanceLabel = calculator.querySelector('#current-retirement-account-balance-label');
      const expectedInvestmentAnnualReturnInput = calculator.querySelector('input#expected-investment-annual-return');
      const expectedInvestmentAnnualReturnLabel = calculator.querySelector('#expected-investment-annual-return-label');
      const targetSavingsRateInput = calculator.querySelector('input#target-savings-rate');
      const targetSavingsRateLabel = calculator.querySelector('#target-savings-rate-label');
      const outputDiv = calculator.querySelector('#savings-rate-impact-on-financial-independence .calculator-result');
      function updateResults() {
        const annualIncome = parseFloat(annualIncomeInput.value) || 0;
        const walkAwayNumber = parseFloat(walkAwayNumberInput.value) || 0;
        const currentRetirementAccountBalance = parseFloat(currentRetirementAccountBalanceInput.value) || 0;
        const expectedInvestmentAnnualReturn = parseFloat(expectedInvestmentAnnualReturnInput.value) || 0;
        expectedInvestmentAnnualReturnLabel.innerHTML = (expectedInvestmentAnnualReturn * 100).toFixed(1) + '% expected investment annual return' ;
        const targetSavingsRate = parseFloat(targetSavingsRateInput.value) || 0;
        targetSavingsRateLabel.innerHTML = (targetSavingsRate * 100).toFixed(0) + '% target savings rate (' + toCurrency(targetSavingsRate * annualIncome, 0) + ' per year)';
        if (outputDiv) {
          if (annualIncome < 0) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set annual income greater than 0', 'result-error'));
            return;
          }
          if (walkAwayNumber < 0) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set walk away number greater than 0', 'result-error'));
            return;
          }
          if (currentRetirementAccountBalance < 0) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set current retirement account balance greater than 0', 'result-error'));
            return;
          }
          if (currentRetirementAccountBalance >= walkAwayNumber) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set current retirement account balance less than walk away number', 'result-error'));
            return;
          }
          if (expectedInvestmentAnnualReturn < 0.01) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set expected investment annual return greater than 1.0%', 'result-error'));
            return;
          }
          if (expectedInvestmentAnnualReturn > 0.15) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set expected investment annual return less than 15.0%', 'result-error'));
            return;
          }
          if (targetSavingsRate < 0.05) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set target savings rate greater than 5%', 'result-error'));
            return;
          }
          if (targetSavingsRate > 1.00) {
            outputDiv.innerHTML = '';
            outputDiv.appendChild(tag('span', 'Set target savings rate less than 100%', 'result-error'));
            return;
          }

          function yearsToWalkAway(target, current, growthRate, income, savingsRate) {
            /*
              YEARS TO WALK AWAY CALCULATION

              Let:
                W = walk-away target
                C = current savings
                r = investment annual growth rate
                s = savings rate
                I = annual income
                n = years to walk-away

                W = s * I * ((1 + r)^n -1)/r + C * (1 + r)^n
                solve for n to get:
                n = Log base 1 + r of (r * W + s * I) / (r * C + s * I)
            */

            const base = 1 + growthRate;

            const numerator = growthRate * target + savingsRate * income;
            const denomenator = growthRate * current + savingsRate * income;

            return baseLog(numerator / denomenator, base);
          }
          function calculateSavingsRateRow(target, current, growthRate, income, savingsRate) {
            years = yearsToWalkAway(target, current, growthRate, income, savingsRate)
            return { "rate": savingsRate,
                     "income": income,
                     "expenses": income * (1 - savingsRate),
                     "annualSavings": income * savingsRate,
                     "monthlySavings": income * savingsRate / 12.0,
                     "years": years }
          }
          function toTable(data) {
            let tableContainer = tag('div', null, 'calculator-result-table');
            let table = tag('table');
            let thead = document.createElement('thead');
            let theadRow = document.createElement('tr');
            theadRow.appendChild(tag('th', 'Savings Rate'));
            theadRow.appendChild(tag('th', 'Expenses'));
            theadRow.appendChild(tag('th', 'Savings/yr'));
            theadRow.appendChild(tag('th', 'Years to FI'));

            thead.appendChild(theadRow);
            table.appendChild(thead);
            let tbody = document.createElement('tbody');
            data.forEach( (row) => {
              let rowClass = '';
              if (row["rate"] == targetSavingsRate) {
                rowClass = 'active';
              }
              let tbodyRow = tag('tr', null, rowClass);
              tbodyRow.appendChild(tag('td', (row["rate"] * 100).toFixed(0) + '%'));
              tbodyRow.appendChild(tag('td', toCurrency(row["expenses"], 0)));
              tbodyRow.appendChild(tag('td', toCurrency(row["annualSavings"], 0)));
              tbodyRow.appendChild(tag('td', row["years"].toFixed(2)));
              tbody.appendChild(tbodyRow);
            });
            table.appendChild(tbody);
            tableContainer.appendChild(table);
            return tableContainer;
          }
          function calculateResult() {
            let values = []

            for (let i = 5; i <= 100; i += 5) {
              rate = i / 100.0
              result = calculateSavingsRateRow(walkAwayNumber, currentRetirementAccountBalance, expectedInvestmentAnnualReturn, annualIncome, rate)
              values.push(result)
            }

            //let result = values[2]["daily"]

            let outputText = document.createDocumentFragment();

            let baseText = document.createElement('p');
            baseText.appendChild(document.createTextNode("At different savings rates, here's how long it'd take you to achieve financial independence:"));
            outputText.appendChild(baseText);
            outputText.appendChild(toTable(values))

            return outputText;
          }

          outputDiv.innerHTML = '';

          let outputHeading = document.createElement('h4');
          outputHeading.innerText = 'Results';
          outputDiv.appendChild(outputHeading);
          outputDiv.appendChild(calculateResult());
        }
      }

      /* Set calculator to auto-update on input changes */
      for (let i = 0; i < inputs.length; i += 1) {
        inputs[i].addEventListener('input', () => {
          updateResults();
        });
      }

      updateResults();
    }
  });
</script>
</body>
</html>
