<style>.mama-fish-saves-calculator{background-color: #FFFFFF; margin: 2rem auto; padding: 2rem 2rem 0; border-radius: 0.2rem; border: 2px solid #34b3b7; max-width: 640px; clear: both;}.mama-fish-saves-calculator .calculator-input-group{padding: 1rem 0;}.mama-fish-saves-calculator h3.calculator-title, .mama-fish-saves-calculator .calculator-result h4{background-color: #34b3b7; color: white; padding: 1rem 0; text-align: center; text-transform: uppercase;}.mama-fish-saves-calculator .calculator-result h4{background-color: #e2b627;}.mama-fish-saves-calculator h4.calculator-group-title{background-color: #34b3b7; margin-bottom: 1rem; padding: 0.5rem; color: white; text-align: center;}.mama-fish-saves-calculator .calculator-input{display: flex; flex-wrap: wrap; margin: 1rem 0 0;}.mama-fish-saves-calculator .calculator-input label{flex: 0 0 100%; padding: 0.25rem 0; color: black;}.mama-fish-saves-calculator .calculator-input .input-prefix{flex: 0 0 auto; padding: 0.5rem; margin: 0 0.25rem; line-height: 2rem;}.mama-fish-saves-calculator .calculator-input input{flex: 1 0 auto; width: auto; max-width: 50%; padding: 0.5rem; margin: 0 0.25rem; border: 1px solid #ddd;}.mama-fish-saves-calculator .calculator-input input:focus{outline: none; border: 1px solid #414141;}.mama-fish-saves-calculator .calculator-input select.input-suffix{flex: 0 0 auto; width: auto; padding: 0.5rem; margin: 0 0.25rem;}.mama-fish-saves-calculator input.slider{margin-top: 1rem; width: 100%; max-width: 100%;}.mama-fish-saves-calculator .slider{-webkit-appearance: none; appearance: none; height: 0.5rem; border-radius: 0.5rem; border-color: #ffffff; color: #ffffff; background: #ffffff; outline: none; opacity: 1; -webkit-transition: .2s; transition: opacity .2s; margin-top: 1rem !important; margin-bottom: 1rem !important; padding: 0 !important;}.mama-fish-saves-calculator .slider:hover{background: #FFFFFF;}.mama-fish-saves-calculator .slider::-webkit-slider-thumb{-webkit-appearance: none; appearance: none; width: 1.5rem; height: 1.5rem; border-radius: 50%; background: #34b3b7; cursor: pointer;}.mama-fish-saves-calculator .slider::-moz-range-thumb{width: 1.5rem; height: 1.5rem; border-radius: 50%; background: #34b3b7; cursor: pointer;}.mama-fish-saves-calculator .calculator-result{margin: 2rem 1rem; overflow-x: auto;}.mama-fish-saves-calculator .calculator-result .result-value{font-weight: bold;}.mama-fish-saves-calculator .calculator-result .result-error{text-align: center; font-weight: bold; font-size: 2rem; color: #ac0000;}.mama-fish-saves-calculator .calculator-result .calculator-highlighted-result{text-align: center; background-color: #ac0000; color: white;}.mama-fish-saves-calculator .calculator-result-table{max-width: 100%; overflow-x: scroll;}.mama-fish-saves-calculator .calculator-result-table tr{transition: background-color 50ms, color 50ms;}.mama-fish-saves-calculator .calculator-result-table tr:hover td{background-color: #34b3b7; color: white;}.mama-fish-saves-calculator .calculator-result-table th{text-align: center;}.mama-fish-saves-calculator .calculator-result-table td, .calculator-result-table th{padding: 0 0.5rem;}.mama-fish-saves-calculator .calculator-result-table .currency-column{text-align: center;}.mama-fish-saves-calculator button.calculator-button{width: 100%; background-color: #34b3b7; margin: 0 auto; cursor: pointer; text-align: center;}.mama-fish-saves-calculator .calculator-attribution{text-align: center; font-size: 0.8rem; font-style: italic; margin-top: 2rem; padding: 1rem 0.5rem; border-top: 1px solid #ddd;}.mama-fish-saves-calculator .calculator-attribution a{font-size: 0.8rem; color: #34b3b7; text-decoration: none;}.mama-fish-saves-calculator .calculator-attribution a:hover{color: #414141; text-decoration: underline;}.mama-fish-saves-calculator .calculator-result p{text-align: center; padding: 0; margin: 2rem 0 0 0; font-size: 2rem;}.mama-fish-saves-calculator .calculator-result span.result-focus{font-size: 2rem;}.mama-fish-saves-calculator .calculator-result ol, .mama-fish-saves-calculator .calculator-result ul{text-align: center; list-style-type: none !important; padding: 0; margin: 2rem; font-size: 1.8rem;}.mama-fish-saves-calculator .calculator-result li{list-style-type: none !important; line-height: 1.25; margin-bottom: 1rem;}</style><div class="mama-fish-saves-calculator" id="if-you-coasted-today"> <h3 class="calculator-title">If You Coasted Today</h3> <div class="calculator-input-group" id=""> <div class="calculator-input"> <label for="current-retirement-savings" id="current-retirement-savings-label">Current Retirement Savings</label><br/> <span class="input-prefix">$</span> <input type="text" class="currency" name="current-retirement-savings" id="current-retirement-savings" value="150,000" min="0"/> </div><div class="calculator-input"> <label for="current-age" id="current-age-label">Current Age</label><br/> <input type="number" class="" name="current-age" id="current-age" value="32" min="0" max="100" step="1"/> </div><div class="calculator-input"> <label for="retirement-age" id="retirement-age-label">Retirement Age</label><br/> <input type="number" class="" name="retirement-age" id="retirement-age" value="60" min="0" max="100" step="1"/> </div><div class="calculator-input"> <label for="expected-return" id="expected-return-label">8.00% expected return</label><br/> <input type="range" class="slider slider--percent" name="expected-return" id="expected-return" value="0.08" min="0.01" max="0.15" step="0.0025"/> </div></div><div class="calculator-result"></div></div><script type="text/javascript">document.addEventListener('DOMContentLoaded', ()=>{console.log("Calculator js running"); function tag(type, value=undefined, klass=undefined, id=undefined){let el=document.createElement(type); if (klass){el.setAttribute('class', klass);}if (id){el.setAttribute('id', id);}if (value){el.innerText=value;}return el;}function toCurrency(value){if (value==0){return '-';}else{return '$' + value.toLocaleString(undefined,{maximumFractionDigits: 0});}}function parseCurrencyToFloat(value){result=parseFloat(value.replace(/[($) ._-]+/g, '').replace(/,/g, '')); if (isNaN(result)){return 0;}else{return result;}}function convertToCurrency(value){return value.toLocaleString();}console.log("Calculator helper functions loaded"); const calculator=document.querySelector('#if-you-coasted-today'); if (calculator){console.log("Calculator found"); const inputs=calculator.querySelectorAll('input'); const currencyInputs=calculator.querySelectorAll('input.currency'); const currentRetirementSavingsInput=calculator.querySelector('input#current-retirement-savings'); const currentRetirementSavingsLabel=calculator.querySelector('#current-retirement-savings-label'); const currentAgeInput=calculator.querySelector('input#current-age'); const currentAgeLabel=calculator.querySelector('#current-age-label'); const retirementAgeInput=calculator.querySelector('input#retirement-age'); const retirementAgeLabel=calculator.querySelector('#retirement-age-label'); const expectedReturnInput=calculator.querySelector('input#expected-return'); const expectedReturnLabel=calculator.querySelector('#expected-return-label'); const outputDiv=calculator.querySelector('#if-you-coasted-today .calculator-result'); function updateResults(){const currentRetirementSavings=parseCurrencyToFloat(currentRetirementSavingsInput.value) || 0; const currentAge=parseFloat(currentAgeInput.value) || 0; const retirementAge=parseFloat(retirementAgeInput.value) || 0; const expectedReturn=parseFloat(expectedReturnInput.value) || 0; expectedReturnLabel.innerHTML=(expectedReturn * 100).toFixed(2) + '% expected return' ; if (outputDiv){if (currentRetirementSavings < 0){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set current retirement savings greater than 0', 'result-error')); return;}if (currentAge < 0){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set current age greater than 0', 'result-error')); return;}if (currentAge > 100){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set current age less than 100', 'result-error')); return;}if (retirementAge < 0){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set retirement age greater than 0', 'result-error')); return;}if (retirementAge > 100){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set retirement age less than 100', 'result-error')); return;}if (currentAge >=retirementAge){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set current age less than retirement age', 'result-error')); return;}if (expectedReturn < 0.01){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set expected return greater than 1.0%', 'result-error')); return;}if (expectedReturn > 0.15){outputDiv.innerHTML=''; outputDiv.appendChild(tag('p', 'Set expected return less than 15.0%', 'result-error')); return;}function calculateResult(){const assetsAtRetirement=currentRetirementSavings * Math.pow(1 + expectedReturn, retirementAge - currentAge); const monthly_4_0_spending=assetsAtRetirement * 0.040 / 12; const monthly_3_5_spending=assetsAtRetirement * 0.035 / 12; const monthly_3_0_spending=assetsAtRetirement * 0.030 / 12; let result=assetsAtRetirement; let outputText=document.createDocumentFragment(); let baseText=document.createElement('p'); baseText.appendChild(document.createTextNode("Assets at retirement age if you coasted today: ")); baseText.appendChild(tag('span', toCurrency(result), 'result-value')); outputText.appendChild(baseText); outputText.appendChild(tag('p', 'This would support spending in retirement:')); let resultList=document.createElement('ul'); let result_40=document.createElement('li'); result_40.appendChild(document.createTextNode("4.0% Withdrawal Rate: ")); result_40.appendChild(tag('span', toCurrency(monthly_4_0_spending) + ' per month')); let result_35=document.createElement('li'); result_35.appendChild(document.createTextNode("3.5% Withdrawal Rate: ")); result_35.appendChild(tag('span', toCurrency(monthly_3_5_spending) + ' per month')); let result_30=document.createElement('li'); result_30.appendChild(document.createTextNode("3.0% Withdrawal Rate: ")); result_30.appendChild(tag('span', toCurrency(monthly_3_0_spending) + ' per month')); resultList.appendChild(result_40); resultList.appendChild(result_35); resultList.appendChild(result_30); outputText.appendChild(resultList); return outputText;}outputDiv.innerHTML=''; let outputHeading=document.createElement('h4'); outputHeading.innerText='Results'; outputDiv.appendChild(outputHeading); outputDiv.appendChild(calculateResult());}}/* Set calculator to auto-update on input changes */ for (let i=0; i < inputs.length; i +=1){inputs[i].addEventListener('input', ()=>{updateResults();});}/* Auto-format with commas */ for (let i=0; i < currencyInputs.length; i +=1){currencyInputs[i].addEventListener('input', ()=>{currencyInputs[i].value=convertToCurrency(parseCurrencyToFloat(currencyInputs[i].value));});}updateResults();}});</script>
