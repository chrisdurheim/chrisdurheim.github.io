---
layout: none
permalink: /matt-s/cc-payoff
published: true
sitemap: false
---
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
<style>
  :root{
    --thrifty-calculator-primary-color: #66BB46;
    --thrifty-calculator-primary-accent-color: #005B93;
    --thrifty-calculator-secondary-color: #333;
    --thrifty-calculator-background-color: white;
    --thrifty-calculator-error-color: #ac162c;
    --thrifty-calculator-line-color: darkgray;
    --thrifty-calculator-font: 'Arial', sans-serif;
    --thrifty-calculator-chart-color-1: var(--thrifty-calculator-secondary-color);
    --thrifty-calculator-chart-color-2: var(--thrifty-calculator-primary-accent-color);
    --thrifty-calculator-chart-color-3: var(--thrifty-calculator-primary-color);
    --thrifty-calculator-chart-color-4: var(--thrifty-calculator-line-color);
  }
  .thrifty-calculators-calculator {
    font-size: 16px;
    font-family: var(--thrifty-calculator-font);
    width: 80vw;
    max-width: 30rem;
    margin: 2rem auto;
  }
  .thrifty-calculators-calculator * {
    border-spacing: border-box;
  }
  .thrifty-calculators-calculator .calculator-container {
    display: flex;
    flex-wrap: wrap;
    align-items: baseline;
    justify-content: space-between;
  }
  .thrifty-calculators-calculator .calculator-inputs,
  .thrifty-calculators-calculator .calculator-result,
  .thrifty-calculators-calculator .calculator-cta {
    flex: 0 0 100%;
  }
  .thrifty-calculators-calculator .calculator-result {
    margin: 1rem 0 0;
  }
  .thrifty-calculators-calculator .calculator-cta {
    margin: 4rem 0 2rem;
    text-align: center;
  }
  .thrifty-calculators-calculator .calculator-cta a {
    padding: 1rem;
    background-color: var(--thrifty-calculator-chart-color-1);
    border: 1px solid var(--thrifty-calculator-line-color);
    color: white;
    text-decoration: none;
    text-transform: uppercase;
    transition: background-color 150ms ease-in-out,
                border-color 150ms ease-in-out;
  }
  .thrifty-calculators-calculator .calculator-cta a:hover,
  .thrifty-calculators-calculator .calculator-cta a:focus {
    border-color: var(--thrifty-calculator-primary-color);
    background-color: var(--thrifty-calculator-chart-color-2);
    outline: none;
  }
  .thrifty-calculators-calculator div.calculator-title {
    font-size: 1.125rem;
    color: var(--thrifty-calculator-primary-color);
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--thrifty-calculator-line-color);
    margin: 1rem 0;
  }
  .thrifty-calculators-calculator div.calculator-description {
    font-size: 1rem;
    margin: 0.5rem 0;
  }
  .thrifty-calculators-calculator div.calculator-description--disclaimer {
    font-size: 0.8rem;
    font-weight: 300;
  }
  .thrifty-calculators-calculator div.calculator-group-title {
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--thrifty-calculator-line-color);
    font-weight: bold;
  }
  .thrifty-calculators-calculator .calculator-field {
    margin: 1rem 0;
  }
  .thrifty-calculators-calculator .calculator-field--inline {
    display: grid;
    grid-template-rows: 1fr 1fr;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    align-content: flex-start;
  }
  @media screen and (min-width: 375px) {
    .thrifty-calculators-calculator .calculator-field--inline {
      grid-template-rows: 1fr;
      grid-template-columns: 1fr 9rem; 
    }
  }
  .thrifty-calculators-calculator .calculator-field label {
    flex: 2 0 50%;
    min-width: 50%;
    display: flex;
    font-size: 0.9rem;
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item:before {
    content: '';
    display: inline-block;
    width: 0.8rem;
    height: 0.8rem;
    margin-right: 0.25rem;
    border: 1px solid var(--thrifty-calculator-line-color);
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color1:before {
    background-color: var(--thrifty-calculator-chart-color-1)
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color2:before {
    background-color: var(--thrifty-calculator-chart-color-2)
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color3:before {
    background-color: var(--thrifty-calculator-chart-color-3)
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color4:before {
    background-color: var(--thrifty-calculator-chart-color-4)
  }

  .thrifty-calculators-calculator .calculator-field .calculator-value {
    flex: 0 0 100%;
    border: 1px solid var(--thrifty-calculator-line-color);
    margin: 0.25rem 0;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    transition: border-color 150ms ease-in-out;
    width: 8rem;
  }
  @media screen and (min-width: 375px) {
    .thrifty-calculators-calculator .calculator-field .calculator-value,
    .thrifty-calculators-calculator .calculator-result .calculator-field .calculator-value {
      flex: 1 0 8rem;
      width: 8rem;
      margin: 0.25rem 0 0 1rem;
    }
  }
  .thrifty-calculators-calculator .calculator-field .calculator-value:focus-within {
    border-color: var(--thrifty-calculator-primary-color);
  }
  .thrifty-calculators-calculator .calculator-result .calculator-value--output {
    border-color: transparent;
  }


  .thrifty-calculators-calculator .calculator-field .calculator-value .input-prefix,
  .thrifty-calculators-calculator .calculator-field .calculator-value .input-suffix {
    flex: 0 0 auto;
    color: var(--thrifty-calculator-line-color);
    font-size: 0.8rem;
    padding: 0.5rem;
    width: 0.5rem;
  }

  .thrifty-calculators-calculator .calculator-field .calculator-value select,
  .thrifty-calculators-calculator .calculator-field .calculator-value input {
    flex: 1 0 auto;
    font-size: 0.8rem;
    border: none;
    padding: 0.5rem 0;
    max-width: 6rem;
  }
  .thrifty-calculators-calculator .calculator-field .calculator-value select:hover,
  .thrifty-calculators-calculator .calculator-field .calculator-value select:focus,
  .thrifty-calculators-calculator .calculator-field .calculator-value input:hover,
  .thrifty-calculators-calculator .calculator-field .calculator-value input:focus {
    outline: none;
  }
  .thrifty-calculators-calculator .calculator-field input.currency,
  .thrifty-calculators-calculator .calculator-field input.left,
  .thrifty-calculators-calculator .calculator-result .calculator-field input.currency,
  .thrifty-calculators-calculator .calculator-result .calculator-field input.left {
    text-align: left;
  }
  .thrifty-calculators-calculator .calculator-field input,
  .thrifty-calculators-calculator .calculator-result .calculator-field input {
    text-align: right;
  }
  input[type=number]:read-only::-webkit-inner-spin-button,
  input[type=number]:read-only::-webkit-outer-spin-button {
    -webkit-appearance: none;
  }

  input[type=number]:read-only {
    -moz-appearance: textfield;
  }

  .thrifty-calculators-calculator .calculator-result .calculator-field {
    border-bottom: 1px solid var(--thrifty-calculator-line-color);
    margin: 1rem 0;
    padding-bottom: 1rem;
  }

  .thrifty-calculators-calculator .calculator-field .calculator-value select {
    flex: 1 0 100%;
    font-size: 0.8rem;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    padding: 0.5em 2em 0.5em 0.5em;
    color: black;
    border: none;
    background-color: var(--thrifty-calculator-background-color);
    transition: background-color 150ms, border-color 150ms;
    /* Arrow */
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
  	background-repeat: no-repeat, repeat;
  	background-position: right .7em top 50%, 0 0;
  	background-size: .65em auto, 100%;
    cursor: pointer;
    width: auto;
  }
  .thrifty-calculators-calculator .calculator-field[data-error]:after {
    flex: 0 0 100%;
    font-size: 0.8rem;
    content: attr(data-error);
    color: var(--thrifty-calculator-error-color);
    margin-bottom: 1em;
  }
  .thrifty-calculators-calculator .calculator-field[data-error] .calculator-value {
    border-color: var(--thrifty-calculator-error-color);
  }
  .thrifty-calculators-calculator .calculator-field .calculator-button-set {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .thrifty-calculators-calculator .calculator-field-group {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }

  .thrifty-calculators-calculator .calculator-field-group__title {
    flex: 0 0 100%;
    font-size: 0.9rem;
    font-style: italic;
    margin: 1.25rem 0 0.25rem;
  }

  .thrifty-calculators-calculator .calculator-field {
    flex: 0 0 12rem;
  }

  .thrifty-calculators-calculator .calculator-container {
    border: 1px solid var(--thrifty-calculator-line-color);
    padding: 2rem;
  }

  .thrifty-calculators-calculator div.calculator-title {
    font-size: 1.5rem;
    border-color: transparent;
  }
  .thrifty-calculators-calculator #total-value {
    margin: 1rem 0;
    font-style: italic;
    text-align: center;
  }
  .thrifty-calculator-tooltip-content {
    padding: 0 1rem;
  }
  .thrifty-calculator-tooltip-content__main {
    font-weight: bold;
    font-size: 1rem;
  }
  .thrifty-calculator-tooltip-content ul {
    padding-left: 0;
    list-style: none;
  }
  .thrifty-calculator-tooltip-content li {
    display: flex;
    justify-content: space-between;
  }
  .thrifty-calculator-tooltip-content li span.amount {
    text-align: right;
  }
  .thrifty-calculator-tooltip-content li span.label {
    text-align: left;
  }
  .thrifty-calculator-tooltip-content li span.label:before {
    content: '';
    display: inline-block;
    width: 0.5rem;
    height: 0.5rem;
    margin-right: 0.25rem;
    border: 1px solid var(--thrifty-calculator-line-color);
  }
  .thrifty-calculator-tooltip-content li span.label.color1:before {
    background-color: var(--thrifty-calculator-chart-color-1)
  }
  .thrifty-calculator-tooltip-content li span.label.color2:before {
    background-color: var(--thrifty-calculator-chart-color-2)
  }
  .thrifty-calculator-tooltip-content li span.label.color3:before {
    background-color: var(--thrifty-calculator-chart-color-3)
  }

</style>
<div class="thrifty-calculators-calculator" id="cc-payoff-calculator">
  <div class="calculator-container">
    <div class="calculator-inputs">
      <div class="calculator-group">
        <div class="calculator-field calculator-field--inline">
          <label for="current-balance">Current Balance</label>
          <div class="calculator-value">
            <span class="input-prefix">$</span>
            <input type="text" class="currency" name="current-balance" id="current-balance" pattern="[0-9]+([\.,][0-9]+)?"  placeholder="e.g. 5,000" min="0" />
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="interest-rate">Interest Rate (APR)</label>
          <div class="calculator-value">
            <input type="number" class="percent" name="interest-rate" id="interest-rate" placeholder="e.g. 16" min="0.0" max="100.0" step="0.01"/>
            <span class="input-suffix">%</span>
          </div>
        </div>
        <div class="calculator-field-group__title">
          Enter One:
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="monthly-payment">Payment Per Month</label>
          <div class="calculator-value">
            <span class="input-prefix">$</span>
            <input type="text" class="currency" name="monthly-payment" id="monthly-payment" pattern="[0-9]+([\.,][0-9]+)?" placeholder="e.g. 150" min="0" />
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="months-to-payoff">Desired Months To Payoff</label>
          <div class="calculator-value">
            <span class="input-prefix">&nbsp;</span>
            <input type="number" class="left" name="months-to-payoff" id="months-to-payoff" placeholder="e.g. 44" min="0" />
          </div>
        </div>
      </div>
    </div>
    <div class="calculator-result">
      <div class="calculator-group">
        <div class="calculator-group-title">Results</div>
        <div class="calculator-field calculator-field--inline">
          <label for="monthly-payment-result">Payment Per Month</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">$</span>
            <input class="currency" type="text" name="monthly-payment-result" id="monthly-payment-result" readonly/>
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="months-to-payoff-result">Months to Pay Off</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">&nbsp;</span>
            <input type="text" class="left" name="months-to-payoff-result" id="months-to-payoff-result" readonly/>
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="debt-free-date-result">Debt-Free Date</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">&nbsp;</span>
            <input type="text" class="left" name="debt-free-date-result" id="debt-free-date-result" readonly/>
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="total-interest-result">Total Interest</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">$</span>
            <input type="text" class="currency" name="total-interest-result" id="total-interest-result" readonly />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    console.log("Calculator js running");
    function toCurrency(value, digits = 2, symbol = '$') {
      if (value == 0) {
        return '-';
      } else {
        return symbol + value.toLocaleString(undefined, { minimumFractionDigits: digits, maximumFractionDigits: digits});
      }
    }
    function pmt(pv, rate, months) {
      const periodRate = rate / 12.0;
      return periodRate * pv / (1 - Math.pow(1 + periodRate, -months));

    }
    function nper(pv, rate, payment) {
      const periodRate = rate / 12.0;
      return Math.log(payment / (payment - pv * periodRate)) / Math.log(1 + periodRate)
    }

    function commasBefore(string, cursorIndex) {
      const commaRe = /,/g
      const str = string.substr(0,cursorIndex);
      
      return ((str || '').match(commaRe) || []).length
    }
    
    const PRETTY_NUMBER_REGEX = /^[0-9,]+$/
    function prettyNumber(event) {
      const el = event.target;
      const cursorAt = el.selectionStart;

      const lastVal = el.dataset.lastVal ?? el.defaultValue ?? '';
      const newVal = el.value;

      const latestChar = newVal[cursorAt - 1];

      if (newVal === '') {
        el.dataset.lastVal = ''
      } else if (PRETTY_NUMBER_REGEX.test(newVal)) {
        let newString = parseFloat(event.target.value.replace(/,/g, '')).toLocaleString();

        el.value = newString;
        el.dataset.lastVal = newString;

        const prevCommasBefore = commasBefore(lastVal, cursorAt);
        const newCommasBefore = commasBefore(newString, cursorAt);

        const newCursor = cursorAt + (newCommasBefore - prevCommasBefore);

        el.setSelectionRange(newCursor, newCursor)
      } else {
        el.value = lastVal;
        el.setSelectionRange(cursorAt - 1, cursorAt - 1)
      }

    }

    const MONTH_NAMES = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 
      'September', 'October', 'November', 'December'];

    function formattedDate(date) {
      return MONTH_NAMES[date.getMonth()] + ' ' + date.getFullYear();
    }

    const calculator = document.querySelector('#cc-payoff-calculator');

    if (calculator) {

      console.log(`
* * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*                                                       *  
* Thrifty Calculators                                   *
*                                                       *
* Financial Calculators Copyright 2021 WhysWorks LLC    *
*                                                       *
* For more information, contact chris@chrisdurheim.com  *
*                                                       *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  `)
      
      const inputs = calculator.querySelectorAll('input');

      const currentBalanceInput = calculator.querySelector('input[name=current-balance]');
      const monthsToPayoffInput = calculator.querySelector('input[name=months-to-payoff]');
      const interestRateInput = calculator.querySelector('input[name=interest-rate]');
      const monthlyPaymentInput = calculator.querySelector('input[name=monthly-payment]');

      const currentBalanceField = currentBalanceInput.parentNode.parentNode;
      const monthsToPayoffField = monthsToPayoffInput.parentNode.parentNode;
      const interestRateField = interestRateInput.parentNode.parentNode;
      const monthlyPaymentField = monthlyPaymentInput.parentNode.parentNode;

      let calculatedFromPayment = true;

      function updateResultsFromPayment() {
        monthsToPayoffInput.value = '';
        calculatedFromPayment = true;
        updateResults();
      }

      function updateResultsFromTerm() {
        monthlyPaymentInput.value = '';
        calculatedFromPayment = false;
        updateResults();
      }

      function updateResults() {
        const monthlyPaymentOutput = calculator.querySelector('#monthly-payment-result');
        const totalInterestOutput = calculator.querySelector('#total-interest-result');
        const monthsToPayoffOutput = calculator.querySelector('#months-to-payoff-result');
        const debtFreeDateOutput = calculator.querySelector('#debt-free-date-result');

        delete currentBalanceField.dataset.error;
        delete monthsToPayoffField.dataset.error;
        delete interestRateField.dataset.error;
        delete monthlyPaymentField.dataset.error;

        let breakingError = false;

        const currentBalance = parseFloat(currentBalanceInput.value.replace(/,/g, '')) ?? 0;
        const interestRate = parseFloat(interestRateInput.value) / 100.0 ?? 0;
        const monthsToPayoff = parseFloat(monthsToPayoffInput.value) ?? 1;
        const monthlyPayment = parseFloat(monthlyPaymentInput.value.replace(/,/g, '')) ?? 1;

        if (!currentBalanceInput.value) {
          breakingError = true;
        }

        if (!interestRateInput.value) {
          breakingError = true;
        }

        if (!monthsToPayoffInput.value && !monthlyPaymentInput.value) {
          breakingError = true;
        }

        if (currentBalance <= 0) {
          breakingError = true;
          currentBalanceField.dataset.error = "Set initial amount greater than zero";
        }

        if (interestRate <= 0.0) {
          breakingError = true;
          interestRateField.dataset.error = "Set interest rate to at least zero";
        }

        if (interestRate > 1.0) {
          breakingError = true;
          interestRateField.dataset.error = "Set interest rate less than 100%";
        }

        if (monthsToPayoff <= 0) {
          breakingError = true;
          monthsToPayoffField.dataset.error = "Set desired months to pay off greater than zero";
        }

        if (monthlyPayment <= 0) {
          breakingError = true;
          monthlyPaymentField.dataset.error = "Set payment per month greater than zero";
        }

        let paymentNeeded;
        let monthsUntilPayoff;

        if (calculatedFromPayment) {
          paymentNeeded = monthlyPayment;
          monthsUntilPayoff = nper(currentBalance, interestRate, monthlyPayment);  
        } else {
          paymentNeeded = pmt(currentBalance, interestRate, monthsToPayoff);
          monthsUntilPayoff = monthsToPayoff;
        }

        const totalInterest = paymentNeeded * monthsUntilPayoff - currentBalance;

        if (!breakingError && (!monthsUntilPayoff || (monthsUntilPayoff == Infinity))) {
          breakingError = true;
          monthlyPaymentField.dataset.error = "This payment is insufficient to ever pay off the debt. Increase payment amount.";
        }

        if (breakingError) {
          monthlyPaymentOutput.value = '';
          monthsToPayoffOutput.value = '';
          totalInterestOutput.value = '';
          debtFreeDateOutput.value = '';
          
          return;
        }

        const payoff = new Date();
        payoff.setMilliseconds(1000 * 3600 * 24 * 365.2425/12.0 * monthsUntilPayoff);

        monthlyPaymentOutput.value = paymentNeeded.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0});
        totalInterestOutput.value = totalInterest.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0});
        monthsToPayoffOutput.value = monthsUntilPayoff.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0});
        debtFreeDateOutput.value = formattedDate(payoff);
      }

      currentBalanceInput.addEventListener('input', prettyNumber);
      monthlyPaymentInput.addEventListener('input', prettyNumber);

      /* Set calculator to auto-update on input changes */
      currentBalanceInput.addEventListener('input', updateResults);
      interestRateInput.addEventListener('input', updateResults);
      monthlyPaymentInput.addEventListener('input', updateResultsFromPayment);
      monthsToPayoffInput.addEventListener('input', updateResultsFromTerm);

      updateResults();
    }
  });
</script>
</body>
</html>
