---
layout: none
permalink: /matt-s/compound-interest
published: true
sitemap: false
---
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
<style>
  :root{
    --thrifty-calculator-primary-color: #558b2f;
    --thrifty-calculator-primary-accent-color: #a3b1c8;
    --thrifty-calculator-secondary-color: #333;
    --thrifty-calculator-background-color: white;
    --thrifty-calculator-error-color: #ac162c;
    --thrifty-calculator-line-color: darkgray;
    --thrifty-calculator-font: 'Arial', sans-serif;
    --thrifty-calculator-chart-color-1: var(--thrifty-calculator-secondary-color);
    --thrifty-calculator-chart-color-2: var(--thrifty-calculator-primary-accent-color);
    --thrifty-calculator-chart-color-3: var(--thrifty-calculator-primary-color);
    --thrifty-calculator-chart-color-4: var(--thrifty-calculator-line-color);
  }
  .thrifty-calculators-calculator {
    font-size: 16px;
    font-family: var(--thrifty-calculator-font);
    width: 80vw;
    max-width: 30rem;
    margin: 2rem auto;
  }
  .thrifty-calculators-calculator .calculator-container {
    display: flex;
    flex-wrap: wrap;
    align-items: baseline;
    justify-content: space-between;
  }
  .thrifty-calculators-calculator .calculator-inputs,
  .thrifty-calculators-calculator .calculator-result,
  .thrifty-calculators-calculator .calculator-cta {
    flex: 0 0 100%;
  }
  .thrifty-calculators-calculator .calculator-result {
    margin: 4rem 0 0;
  }
  .thrifty-calculators-calculator .calculator-cta {
    margin: 4rem 0 2rem;
    text-align: center;
  }
  .thrifty-calculators-calculator .calculator-cta a {
    padding: 1rem;
    background-color: var(--thrifty-calculator-chart-color-1);
    border: 1px solid var(--thrifty-calculator-line-color);
    color: white;
    text-decoration: none;
    text-transform: uppercase;
    transition: background-color 150ms ease-in-out,
                border-color 150ms ease-in-out;
  }
  .thrifty-calculators-calculator .calculator-cta a:hover,
  .thrifty-calculators-calculator .calculator-cta a:focus {
    border-color: var(--thrifty-calculator-primary-color);
    background-color: var(--thrifty-calculator-chart-color-2);
    outline: none;
  }
  .thrifty-calculators-calculator div.calculator-title {
    font-size: 1.125rem;
    color: var(--thrifty-calculator-primary-color);
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--thrifty-calculator-line-color);
    margin: 1rem 0;
  }
  .thrifty-calculators-calculator div.calculator-group-title {
    padding: 0.5rem 0;
    border-bottom: 1px solid var(--thrifty-calculator-line-color);
    font-weight: bold;
  }
  .thrifty-calculators-calculator .calculator-field {
    margin: 1rem 0;
  }
  .thrifty-calculators-calculator .calculator-field--inline {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
  }
  .thrifty-calculators-calculator .calculator-field label {
    flex: 2 0 50%;
    min-width: 50%;
    display: flex;
    font-size: 0.9rem;
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item:before {
    content: '';
    display: inline-block;
    width: 0.8rem;
    height: 0.8rem;
    margin-right: 0.25rem;
    border: 1px solid var(--thrifty-calculator-line-color);
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color1:before {
    background-color: var(--thrifty-calculator-chart-color-1)
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color2:before {
    background-color: var(--thrifty-calculator-chart-color-2)
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color3:before {
    background-color: var(--thrifty-calculator-chart-color-3)
  }
  .thrifty-calculators-calculator .calculator-field label.chart-legend-item.color4:before {
    background-color: var(--thrifty-calculator-chart-color-4)
  }

  .thrifty-calculators-calculator .calculator-field .calculator-value {
    flex: 0 0 100%;
    border: 1px solid var(--thrifty-calculator-line-color);border-color:
    margin: 0.25rem 0;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    transition: border-color 150ms ease-in-out;
  }
  @media screen and (min-width: 768px) {
    .thrifty-calculators-calculator .calculator-field .calculator-value {
      flex: 1 0 10rem;
    }
  }
  .thrifty-calculators-calculator .calculator-field .calculator-value:focus-within {
    border-color: var(--thrifty-calculator-primary-color);
  }
  .thrifty-calculators-calculator .calculator-field .calculator-value--output {
    border-color: transparent;
  }

  .thrifty-calculators-calculator .calculator-field .calculator-value .input-prefix,
  .thrifty-calculators-calculator .calculator-field .calculator-value .input-suffix {
    flex: 0 0 auto;
    color: var(--thrifty-calculator-line-color);
    font-size: 0.8rem;
    padding: 0.5rem;
  }

  .thrifty-calculators-calculator .calculator-field .calculator-value select,
  .thrifty-calculators-calculator .calculator-field .calculator-value input {
    flex: 1 0 auto;
    font-size: 0.8rem;
    border: none;
    padding: 0.5rem 0;
  }
  .thrifty-calculators-calculator .calculator-field .calculator-value select:hover,
  .thrifty-calculators-calculator .calculator-field .calculator-value select:focus,
  .thrifty-calculators-calculator .calculator-field .calculator-value input:hover,
  .thrifty-calculators-calculator .calculator-field .calculator-value input:focus {
    outline: none;
  }
  .thrifty-calculators-calculator .calculator-field input.percent {
    text-align: right;
  }
  input[type=number]:read-only::-webkit-inner-spin-button,
  input[type=number]:read-only::-webkit-outer-spin-button {
    -webkit-appearance: none;
  }

  input[type=number]:read-only {
    -moz-appearance: textfield;
  }

  .thrifty-calculators-calculator .calculator-field .calculator-value select {
    flex: 1 0 100%;
    font-size: 0.8rem;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    padding: 0.5em 2em 0.5em 0.5em;
    color: black;
    border: none;
    background-color: var(--thrifty-calculator-background-color);
    transition: background-color 150ms, border-color 150ms;
    /* Arrow */
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
  	background-repeat: no-repeat, repeat;
  	background-position: right .7em top 50%, 0 0;
  	background-size: .65em auto, 100%;
    cursor: pointer;
    width: auto;
  }
  .thrifty-calculators-calculator .calculator-field[data-error]:after {
    flex: 0 0 100%;
    font-size: 0.8rem;
    content: attr(data-error);
    color: var(--thrifty-calculator-error-color);
    margin-bottom: 1em;
  }
  .thrifty-calculators-calculator .calculator-field[data-error] .calculator-value {
    border-color: var(--thrifty-calculator-error-color);
  }
  .thrifty-calculators-calculator .calculator-field .calculator-button-set {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .thrifty-calculators-calculator .calculator-container {
    border: 1px solid var(--thrifty-calculator-line-color);
    padding: 2rem;
  }

  .thrifty-calculators-calculator div.calculator-title {
    font-size: 1.5rem;
    border-color: transparent;
  }
  .thrifty-calculators-calculator #total-value {
    margin: 1rem 0;
    font-style: italic;
    text-align: center;
  }
  .thrifty-calculator-tooltip-content {
    padding: 0 1rem;
  }
  .thrifty-calculator-tooltip-content__main {
    font-weight: bold;
    font-size: 1rem;
  }
  .thrifty-calculator-tooltip-content ul {
    padding-left: 0;
    list-style: none;
  }
  .thrifty-calculator-tooltip-content li {
    display: flex;
    justify-content: space-between;
  }
  .thrifty-calculator-tooltip-content li span.amount {
    text-align: right;
  }
  .thrifty-calculator-tooltip-content li span.label {
    text-align: left;
  }
  .thrifty-calculator-tooltip-content li span.label:before {
    content: '';
    display: inline-block;
    width: 0.5rem;
    height: 0.5rem;
    margin-right: 0.25rem;
    border: 1px solid var(--thrifty-calculator-line-color);
  }
  .thrifty-calculator-tooltip-content li span.label.color1:before {
    background-color: var(--thrifty-calculator-chart-color-1)
  }
  .thrifty-calculator-tooltip-content li span.label.color2:before {
    background-color: var(--thrifty-calculator-chart-color-2)
  }
  .thrifty-calculator-tooltip-content li span.label.color3:before {
    background-color: var(--thrifty-calculator-chart-color-3)
  }

</style>
<div class="thrifty-calculators-calculator" id="compound-interest-calculator">
  <div class="calculator-title">Compound Interest Calculator</div>
  <div class="calculator-container">
    <div class="calculator-inputs">
      <div class="calculator-group">
        <div class="calculator-group-title">Basics</div>
        <div class="calculator-field calculator-field--inline">
          <label for="starting-amount">Starting Amount</label>
          <div class="calculator-value">
            <span class="input-prefix">$</span>
            <input type="number" class="currency" name="starting-amount" id="starting-amount" value="5000" min="0" />
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="years-to-save">Years to Save</label>
          <div class="calculator-value">
            <span class="input-prefix">&nbsp;</span>
            <input type="number" name="years-to-save" id="years-to-save" value="10" min="0" max="100" />
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="rate-of-return">Rate of Return</label>
          <div class="calculator-value">
            <input type="number" class="percent" name="rate-of-return" id="rate-of-return" value="6.00" min="0.0" max="100.0" step="0.125"/>
            <span class="input-suffix">%</span>
          </div>
        </div>
      </div>
      <div class="calculator-group">
        <div class="calculator-group-title">Additional Contributions</div>
        <div class="calculator-field calculator-field--inline">
          <label for="contribution-amount">Amount</label>
          <div class="calculator-value">
            <span class="input-prefix">$</span>
            <input type="number" class="currency" name="contribution-amount" id="contribution-amount" value="50" min="0" />
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="contribution-frequency">Frequency</label>
          <div class="calculator-value">
            <select name="contribution-frequency" id="contribution-frequency">
              <option value="365.2425">Daily</option>
              <option value="52.1775">Weekly</option>
              <option value="26.08875">Bi-Weekly</option>
              <option value="12" selected="selected">Monthly</option>
              <option value="4">Quarterly</option>
              <option value="1">Yearly</option>
            </select>
          </div>
        </div>
      </div>
    </div>
    <div class="calculator-result">
      <div class="calculator-field-group">
        <div class="calculator-group-title">Results</div>
        <div id="total-value">After 5 years, you'd have $17,117.45</div>
      </div>
      <div class="calculator-field-group">
        <div class="calculator-chart" id="yearly-growth-chart"></div>
        <div class="calculator-group-title">Final Amount Breakdown</div>
      </div>
      <div class="calculator-field-group">
        <div class="calculator-field calculator-field--inline">
          <label for="startingAmountResult" class="chart-legend-item color1">Starting Amount</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">$</span>
            <input type="number" class="currency" name="starting-amount-result" id="starting-amount-result" value="5000.00" readonly/>
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="contributions" class="chart-legend-item color2">Contributions</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">$</span>
            <input type="number" class="currency" name="contributions" id="contributions" value="6000.00" readonly/>
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="interest" class="chart-legend-item color3">Interest</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">$</span>
            <input type="number" class="currency" name="interest" id="interest" value="6117.45" readonly/>
          </div>
        </div>
        <div class="calculator-field calculator-field--inline">
          <label for="total-future-value">Total</label>
          <div class="calculator-value calculator-value--output">
            <span class="input-prefix">$</span>
            <input type="number" class="currency" name="total-future-value" id="total-future-value" value="17117.45" readonly/>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', () => {
    console.log("Calculator js running");
    function toCurrency(value, digits = 2, symbol = '$') {
      if (value == 0) {
        return '-';
      } else {
        return symbol + value.toLocaleString(undefined, { minimumFractionDigits: digits, maximumFractionDigits: digits});
      }
    }
    function futureValue(startingAmount, yearsToSave, rateOfReturn, compoundingFrequency, contributionAmount, contributionFrequency) {
      const equivalentAnnualRate = Math.pow(1 + rateOfReturn / compoundingFrequency, compoundingFrequency) - 1;
      const annualContributionRate = (Math.pow(1 + equivalentAnnualRate, 1 / contributionFrequency) - 1)
      const equivalentPeriodRate = contributionFrequency * annualContributionRate;

      const startingFutureValue = startingAmount * Math.pow(1 + equivalentAnnualRate, yearsToSave);
      const annuityFutureValue = (1 + annualContributionRate) * contributionAmount * (Math.pow(1 + annualContributionRate, contributionFrequency * yearsToSave) - 1) / annualContributionRate;

      const totalValue = startingFutureValue + annuityFutureValue;
      const contributions = contributionAmount * contributionFrequency * yearsToSave;
      const interest = totalValue - startingAmount - contributions;

      return { startingAmount, contributions, interest, totalValue }
    }
    console.log("Calculator helper functions loaded");
    const calculator = document.querySelector('#compound-interest-calculator');

    if (calculator) {
      console.log("Calculator found");

      const color1 = getComputedStyle(document.documentElement).getPropertyValue('--thrifty-calculator-chart-color-1').trim().toLowerCase();
      const color2 = getComputedStyle(document.documentElement).getPropertyValue('--thrifty-calculator-chart-color-2').trim().toLowerCase();
      const color3 = getComputedStyle(document.documentElement).getPropertyValue('--thrifty-calculator-chart-color-3').trim().toLowerCase();
      const color4 = getComputedStyle(document.documentElement).getPropertyValue('--thrifty-calculator-chart-color-4').trim().toLowerCase();

      let chartsInitialized = false;
      let resizing = false;
      const yearlyGrowthChart = calculator.querySelector('#yearly-growth-chart');

      const inputs = calculator.querySelectorAll('input');
      const selects = calculator.querySelectorAll('select');

      const startingAmountInput = calculator.querySelector('input[name=starting-amount]');
      const yearsToSaveInput = calculator.querySelector('input[name=years-to-save]');
      const rateOfReturnInput = calculator.querySelector('input[name=rate-of-return]');

      const contributionAmountInput = calculator.querySelector('input[name=contribution-amount]');
      const contributionFrequencyInput = calculator.querySelector('select[name=contribution-frequency]');

      const resultLine = calculator.querySelector('#total-value');
      const startingAmountOutput = calculator.querySelector('input[name=starting-amount-result]');
      const contributionsOutput = calculator.querySelector('input[name=contributions]');
      const interestOutput = calculator.querySelector('input[name=interest]');
      const totalValueOutput = calculator.querySelector('input[name=total-future-value]');

      const startingAmountField = startingAmountInput.parentNode.parentNode;
      const yearsToSaveField = yearsToSaveInput.parentNode.parentNode;
      const rateOfReturnField = rateOfReturnInput.parentNode.parentNode;
      const contributionAmountField = contributionAmountInput.parentNode.parentNode;

      function updateResults() {
        /* Get values */
        const startingAmount = parseFloat(startingAmountInput.value) || 0;
        const yearsToSave = parseFloat(yearsToSaveInput.value) || 0;
        const rateOfReturn = parseFloat(rateOfReturnInput.value) / 100.0 || 0;

        const contributionAmount = parseFloat(contributionAmountInput.value) || 0;
        const contributionFrequency = parseFloat(contributionFrequencyInput.value);

        delete startingAmountField.dataset.error;
        delete yearsToSaveField.dataset.error;
        delete rateOfReturnField.dataset.error;
        delete contributionAmountField.dataset.error;

        let breakingError = false;

        if (startingAmount <= 0) {
          breakingError = true;
          startingAmountField.dataset.error = "Set starting amount greater than zero";
        }

        if (yearsToSave <= 0) {
          breakingError = true;
          yearsToSaveField.dataset.error = "Set years to save greater than zero";
        }

        if (yearsToSave > 100) {
          breakingError = true;
          yearsToSaveField.dataset.error = "Set years to save to 100 or less";
        }

        if (rateOfReturn <= 0.0) {
          breakingError = true;
          rateOfReturnField.dataset.error = "Set rate of return to at least zero";
        }

        if (rateOfReturn > 1.0) {
          breakingError = true;
          rateOfReturnField.dataset.error = "Set rate of return less than 100%";
        }

        if (contributionAmount < 0) {
          breakingError = true;
          contributionAmountField.dataset.error = "Set contribution amount to at least zero";
        }

        if (breakingError) {
          resultLine.innerHTML = 'Error in inputs. Please correct as instructed above';
          yearlyGrowthChart.innerHTML = '';
          startingAmountOutput.value = '';
          contributionsOutput.value = '';
          interestOutput.value = '';
          totalValueOutput.value = '';
          return;
        }

        const fv = futureValue(startingAmount, yearsToSave, rateOfReturn, 1, contributionAmount, contributionFrequency);

        resultLine.innerHTML = "After " + yearsToSave + " years, you'd have " + toCurrency(fv.totalValue);

        startingAmountOutput.value = fv.startingAmount.toFixed(2);
        contributionsOutput.value = fv.contributions.toFixed(2);
        interestOutput.value = fv.interest.toFixed(2);
        totalValueOutput.value = fv.totalValue.toFixed(2);

        if (chartsInitialized) {
          drawYearlyGrowthChart(startingAmount, yearsToSave, rateOfReturn, 1, contributionAmount, contributionFrequency);
        }
      }

      /* Set calculator to auto-update on input changes */
      for (let i = 0; i < inputs.length; i += 1) {
        inputs[i].addEventListener('input', updateResults);
      }
      for (let i = 0; i < selects.length; i += 1) {
        selects[i].addEventListener('input', updateResults);
      }

      window.addEventListener('resize', function(event){
        if (resizing) {
          return;
        } else {
          resizing = true;
          yearlyGrowthChart.innerHTML = '';
          updateResults();
          resizing = false;
        }
      });

      function yearlyGrowthChartTooltip(year, fv) {
        return `<div class="thrifty-calculator-tooltip-content">
                  <p class="thrifty-calculator-tooltip-content__main">Year ${year}: ${toCurrency(fv.totalValue)}</p>
                  <ul>
                    <li><span class="label color3">Interest: </span><span class="amount">${toCurrency(fv.interest)}</span></li>
                    <li><span class="label color2">Contributions: </span><span class="amount">${toCurrency(fv.contributions)}</span></li>
                    <li><span class="label color1">Starting: </span><span class="amount">${toCurrency(fv.startingAmount)}</span></li>
                  </ul>
                </div>`;
      }

      function drawYearlyGrowthChart(startingAmount, yearsToSave, rateOfReturn, compoundingFrequency, contributionAmount, contributionFrequency) {
        let yearlyGrowthTable = new google.visualization.DataTable();
        yearlyGrowthTable.addColumn('number', 'Year');
        yearlyGrowthTable.addColumn({type: 'string', role: 'tooltip', p: {'html': true}});
        yearlyGrowthTable.addColumn('number', 'Starting');
        yearlyGrowthTable.addColumn('number', 'Contributions');
        yearlyGrowthTable.addColumn('number', 'Interest');

        for (let i = 1; i <= yearsToSave; i += 1) {
          let fv = futureValue(startingAmount, i, rateOfReturn, 1, contributionAmount, contributionFrequency);

          yearlyGrowthTable.addRow([{ v: i,
                                      f: 'Year ' + i + ': ' + toCurrency(fv.totalValue) },
                                    yearlyGrowthChartTooltip(i, fv),
                                    { v: fv.startingAmount,
                                      f: toCurrency(fv.startingAmount) },
                                    { v: fv.contributions,
                                      f: toCurrency(fv.contributions) },
                                    { v: fv.interest,
                                      f: toCurrency(fv.interest) }]);
        }

        let baseOptions = {
          animation: {
            duration: 100,
            startup: true,
            easing: 'inAndOut'
          },
          colors:[ color1, color2, color3, color4 ],
          legend: {position: 'top', maxLines: 3},
          isStacked: true,
          height: 300,
          tooltip: {isHtml: true},
          focusTarget: 'category'
        };
        const yearlyGrowthChartElement = new google.visualization.ColumnChart(yearlyGrowthChart);
        yearlyGrowthChartElement.draw(yearlyGrowthTable, baseOptions);
      }

      function chartsReady() {
        chartsInitialized = true;
        updateResults();
      }

      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(chartsReady);

      updateResults();
    }
  });
</script>
</body>
</html>
